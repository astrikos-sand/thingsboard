<form style="min-width: 30rem;">
  <mat-toolbar color="primary">
    <h2>Export Data</h2>
    <span fxFlex></span>
    <button mat-icon-button (click)="cancel()" type="button">
      <mat-icon>close</mat-icon>
    </button>
  </mat-toolbar>
  <div mat-dialog-content>
    <mat-form-field appearance="outline" class="mat-block">
      <mat-label>Name</mat-label>
      <input
        matInput
        [(ngModel)]="exportDataForm.name"
        [ngModelOptions]="{standalone: true}"
        placeholder="Enter export name"
        required
      />
    </mat-form-field>
    <mat-form-field appearance="outline" class="mat-block">
      <mat-label>Description</mat-label>
      <textarea
        matInput
        [(ngModel)]="exportDataForm.description"
        [ngModelOptions]="{standalone: true}"
        placeholder="Enter a brief description"
        maxlength="500"
        rows="4"
      ></textarea>
      <mat-hint align="end">
        {{ exportDataForm.description?.length || 0 }} / 500
      </mat-hint>
    </mat-form-field>
    <mat-form-field appearance="outline" class="mat-block">
      <mat-label>Search Flows</mat-label>
      <div matSuffix>
        <button
          mat-icon-button
          (click)="searchFlows()"
          [disabled]="isLoading"
          matTooltip="Search"
        >
          <mat-icon>search</mat-icon>
        </button>
      </div>
      <input
        matInput
        placeholder="Enter search query"
        [(ngModel)]="searchQuery"
        name="searchQuery"
      />
    </mat-form-field>    
    <div *ngIf="exportDataForm.flows.length > 0" class="selected-flows">
      <h4>Selected Flows:</h4>
      <div *ngFor="let flow of exportDataForm.flows" class="flow-item">
        <span>{{ flow.full_name }}</span>
        <button
          mat-icon-button
          (click)="removeFlowFromExport(flow.id)"
          matTooltip="Remove Flow"
        >
          <mat-icon>remove_circle</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <div mat-dialog-actions style="margin-top: 16px">
    <button mat-raised-button color="primary" (click)="export()">
      Export
    </button>
    <button mat-raised-button (click)="cancel()">Cancel</button>
  </div>
</form>

<mat-toolbar color="primary">
  <h2>Executions</h2>
  <span fxFlex></span>

  <button mat-icon-button (click)="refreshExecutions()" type="button">
    <mat-icon>refresh</mat-icon>
  </button>

  <button mat-icon-button (click)="closeDialog()" type="button">
    <mat-icon>close</mat-icon>
  </button>

</mat-toolbar>

<div mat-dialog-content>
  <mat-progress-bar *ngIf="isLoading" mode="indeterminate"></mat-progress-bar>

  <table *ngIf="!isLoading" class="mat-elevation-z8">
    <thead>
      <tr>
        <th>Timestamp</th>
        <th>Status</th>
        <th>Container Logs</th>
        <th>JSON Logs</th>
        <th>HTML Logs</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let execution of executions">
        <td>{{ execution.timestamp }}</td>
        <td>
          <span [style.color]="getStatusColor(execution.status)">{{ execution.status }}</span>
        </td>
        <td>
          <ng-container *ngIf="execution.container_logs != '/backend#'; else noContainerLogs">
            <a [href]="execution.container_logs" target="_blank">View</a>
          </ng-container>
          <ng-template #noContainerLogs>N/A</ng-template>
        </td>
        <td>
          <ng-container *ngIf="execution.json_logs != '/backend#'; else noJsonLogs">
            <a [href]="execution.json_logs" target="_blank">View</a>
          </ng-container>
          <ng-template #noJsonLogs>N/A</ng-template>
        </td>
        <td>
          <ng-container *ngIf="execution.html_logs != '/backend#'; else noHtmlLogs">
            <a [href]="execution.html_logs" target="_blank">View</a>
          </ng-container>
          <ng-template #noHtmlLogs>N/A</ng-template>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="executions.length === 0 && !isLoading">
    <p>No executions found for this flow.</p>
  </div>
</div>

<mat-dialog-actions>
  <button mat-button (click)="closeDialog()">Close</button>
</mat-dialog-actions>